---
# Reset tasks for agent_provision role
# Note: This is intentionally conservative - we don't remove language runtimes
# or dev tools as they may be in use

- name: Display reset message
  debug:
    msg:
      - "agent_provision reset does not remove language runtimes or dev tools"
      - "These are intentionally persistent for safety"
      - "To completely clean an agent, recreate the VM instead"

- name: Remove neovim configuration
  file:
    path: ~/.config/nvim
    state: absent

- name: Remove oh-my-posh binary
  file:
    path: ~/.local/bin/oh-my-posh
    state: absent
  when: install_oh_my_posh

- name: Remove oh-my-posh theme
  file:
    path: ~/{{ oh_my_posh_theme }}
    state: absent
  when: install_oh_my_posh

- name: Remove vim-plug
  file:
    path: ~/.local/share/nvim/site/autoload/plug.vim
    state: absent
  when: install_vim_plug

- name: Remove bin directory
  file:
    path: ~/bin
    state: absent
  when: deploy_bin_scripts

- name: Remove bash_profile
  file:
    path: ~/.bash_profile
    state: absent

- name: Remove bashrc
  file:
    path: ~/.bashrc
    state: absent

- name: Remove Nerd Fonts
  file:
    path: ~/.local/share/fonts
    state: absent
  when: install_nerd_fonts

- name: Display manual cleanup steps
  debug:
    msg:
      - "For complete cleanup:"
      - "  - Language runtimes remain installed"
      - "  - Docker containers: docker system prune -a"
      - "  - AWS credentials: rm -rf ~/.aws"
      - "  - GitHub auth: gh auth logout"
      - "  - Claude Code: Remove ~/.claude-code"
